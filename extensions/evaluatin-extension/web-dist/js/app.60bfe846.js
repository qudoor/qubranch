(function(){"use strict";var e={6224:function(e,t,a){a.d(t,{k:function(){return Bt}});var n=a(9963),o=a(6252);function l(e,t){const a=(0,o.up)("dv-decoration-3"),n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(a,{style:{width:"250px",height:"30px",position:"absolute",top:"50px",right:"50px"}}),(0,o.Wm)(n)])}var s=a(3744);const i={},r=(0,s.Z)(i,[["render",l]]);var d=r,u=a(8981),c=(a(7518),a(6849)),p=a(2119),g=a(3577),m=a(2262),v=a(2286),h=a(6329),y=a(5356),f=a(542),_=a(3613),b=a(9937),w=a(9864),x=a(9370),S=a(9884),k=a(8943),I=a(9662),U=a(2642),C=a(2223);const j=new Map;j.set("Input",v.ZP),j.set("InputGroup",v.ZP.Group),j.set("InputPassword",v.ZP.Password),j.set("InputSearch",v.ZP.Search),j.set("InputTextArea",v.ZP.TextArea),j.set("InputNumber",h.Z),j.set("AutoComplete",y.ZP),j.set("Select",f.ZP),j.set("TreeSelect",_.ZP),j.set("Switch",b.ZP),j.set("RadioGroup",w.ZP.Group),j.set("Checkbox",x.ZP),j.set("CheckboxGroup",x.ZP.Group),j.set("Cascader",S.Z),j.set("Slider",k.Z),j.set("Rate",I.Z),j.set("DatePicker",U.ZP),j.set("MonthPicker",U.ZP.MonthPicker),j.set("RangePicker",U.ZP.RangePicker),j.set("WeekPicker",U.ZP.WeekPicker),j.set("TimePicker",C.ZP),j.set("Slot",void 0);var P=(0,o.aZ)({props:{schemas:null,formProps:null,formData:null,formRules:null},emits:["update:formData","changeEvent"],setup(e,{expose:t,emit:a}){const n=e;let l=(0,o.Fl)({get:()=>n.formData,set:e=>{a("update:formData",e)}}),s=(0,m.iH)();function i(){const{validate:e,validateFields:t,scrollToField:a,resetFields:n,clearValidate:o}=s.value;return{validate:e,validateFields:t,scrollToField:a,resetFields:n,clearValidate:o}}function r(e,t){a("changeEvent",{item:e,val:t})}return t({useForm:i,comFormData:l}),(t,a)=>{const n=(0,o.up)("a-form-item"),i=(0,o.up)("a-col"),d=(0,o.up)("a-row"),u=(0,o.up)("a-form");return(0,o.wg)(),(0,o.j4)(u,(0,o.dG)({ref_key:"formRef",ref:s,model:(0,m.SU)(l),rules:e.formRules},e.formProps),{default:(0,o.w5)((()=>[(0,o.Wm)(d,{gutter:[20,0]},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.schemas,(a=>((0,o.wg)(),(0,o.j4)(i,(0,o.dG)({key:a.field,span:24},a.colProps),{default:(0,o.w5)((()=>[(0,o.Wm)(n,(0,o.dG)({name:a.field},a.formItemProps,{label:a.label}),{default:(0,o.w5)((()=>[a.slot?(0,o.WI)(t.$slots,a.slot,{key:0,record:e.formData}):["Checkbox","Switch"].includes(a.component)?((0,o.wg)(),(0,o.j4)((0,o.LL)((0,m.SU)(j).get(a.component)),(0,o.dG)({key:1,checked:(0,m.SU)(l)[a.field],"onUpdate:checked":e=>(0,m.SU)(l)[a.field]=e},a.componentProps),null,16,["checked","onUpdate:checked"])):((0,o.wg)(),(0,o.j4)((0,o.LL)((0,m.SU)(j).get(a.component)),(0,o.dG)({key:2,value:(0,m.SU)(l)[a.field],"onUpdate:value":e=>(0,m.SU)(l)[a.field]=e,style:{width:"100%"}},a.componentProps,{onChange:e=>r(a,e)}),null,16,["value","onUpdate:value","onChange"]))])),_:2},1040,["name","label"])])),_:2},1040)))),128)),(0,o.Wm)(i,{span:6},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"operate-btn")])),_:3})])),_:3})])),_:3},16,["model","rules"])}}});const O=P;var q=O;const W={style:{padding:"20px"}};var L=(0,o.aZ)({setup(e,{expose:t}){let a=(0,m.iH)({department_id:"",user_id:"",ss:""});const n={department_id:[{required:!0,message:"格式：纯数字/半角逗号分隔的一组数字(1,3,5...)，注意数字不能为0开头",pattern:/^[1-9][\d]*(,[1-9][\d]*)*$/g}],user_id:[{required:!0,message:"请输入大于0的数字",pattern:/^[1-9][\d]*$/g}],ss:[{required:!0,message:"请选择"}],name:[{required:!0,message:"请输入"}]};let l=(0,m.iH)();const s=(0,m.iH)([{field:"name",label:"任务名字",component:"Input"},{field:"user_id",label:"测试轮数",component:"Input"},{field:"department_id",label:"比特数",component:"Input"},{field:"ss",label:"算法",component:"Select",componentProps:{options:[{label:"grover",value:"grover"}]}}]);function i(){return l.value.comFormData}async function r(){const{validateFields:e}=l.value.useForm();return await e(),a.value}return t({getFormData:i,run:r}),(e,t)=>{const i=(0,o.up)("dv-border-box-12");return(0,o.wg)(),(0,o.j4)(i,{style:{width:"400px",height:"auto"}},{default:(0,o.w5)((()=>[(0,o._)("div",W,[(0,o.Wm)((0,m.SU)(q),{ref_key:"formAppRef",ref:l,formData:(0,m.SU)(a),"onUpdate:formData":t[0]||(t[0]=e=>(0,m.dq)(a)?a.value=e:a=e),schemas:s.value,"form-rules":n,layout:"vertical"},null,8,["formData","schemas"])])])),_:1})}}});const D=(0,s.Z)(L,[["__scopeId","data-v-61fb6872"]]);var H=D,T=a(1446),M=a(9669),E=a.n(M);function A(e,t){const a=E().create({baseURL:e||`http://${sessionStorage.getItem("boxapi")}:21568`,timeout:5e4});return a.interceptors.request.use((e=>(e.headers={"Content-Type":e.headers["Content-Type"],userId:localStorage.getItem("machineId")},e)),(e=>Promise.reject(e))),a.interceptors.response.use((e=>(e=e.data,e)),(e=>(t?.messageClose||"ERR_NETWORK"===e.code&&T.ZP.error("连接不上远程box，请重新开始测评或稍后重试"),Promise.reject(e)))),a}var R=A;const Z=()=>({request:R(`http://${sessionStorage.getItem("boxapi")}:21568`)}),$=()=>({request:R(`http://${sessionStorage.getItem("slurmapi")}:21568`)}),B=e=>Z().request.get(`/get_info/${e}`),F=e=>Z().request.post("/start_job",{},{params:e}),J=e=>Z().request.get("/get_result",{params:e}),z=()=>Z().request.get("/get_task"),G=e=>$().request.post("/start_job",{},{params:e}),Y=e=>$().request.get("/get_result",{params:e}),K=()=>$().request.get("/get_task");class Q{constructor(){}runColonyBox(e,t){async function a(n){const{type:o}=n.data;if("runColonyBox"===o){sessionStorage.setItem("boxapi",e.ip);const{tag:n}=await F(e);window.removeEventListener("message",a),Zt.push({name:"RevalCharts",query:{modelType:"colonyBox",tag:n,job:e.job}}),t()}}window.addEventListener("message",a)}runSingleMac(e){function t({data:a}){"runSingleMac"===a.type&&(Zt.push({name:"RevalCharts",query:{modelType:"single",tag:a.value,job:e.name}}),window.removeEventListener("message",t))}window.addEventListener("message",t)}runSingleWin(e){function t({data:a}){"runSingleWin"===a.type&&(Zt.push({name:"RevalCharts",query:{modelType:"single",tag:a.value,job:e.name}}),window.removeEventListener("message",t))}window.addEventListener("message",t)}runColonyHpc(e,t){async function a(n){const{type:o}=n.data;if("runColonySlurm"===o){sessionStorage.setItem("slurmapi",e.ip);const{tag:n}=await G(e);window.removeEventListener("message",a),Zt.push({path:"/task/list",query:{modelType:"colonySlurm",tag:n,job:e.job}}),t()}}window.addEventListener("message",a)}}class N{constructor(){}async getHardwareInfoBox(){const e=await B(1),{suanli:t,xinghao:a,zhupin:n}=e.gpu_info,o={CPU:e.cpu_info,GPU:{"算力":t,"型号":a,"主频":n},OS:{"名称":e.os_info},"内存":e.ram_info,IP:{ip:sessionStorage.getItem("boxapi")}};return[o]}getHardwareInfoHpc(){}async getJobListBox(){const e=await z();return e}async getJobListHpc(){const e=await K();return e}async getJobInfoHpc({tag:e,job:t}){const a=await Y({tag:e,job:t}),n=[],o=Object.keys(a.all_algo_data);return o.forEach((e=>{const t=Object.keys(a.all_algo_data[e]);t.forEach((l=>{const s=Object.keys(a.all_algo_data[e][l].all_round_details);s.forEach((i=>{const r=a.all_algo_data[e][l].all_round_details[i],{algorithm:d,now_qubit:u,now_round:c,data:{time:p}}=r;n.push({taskname:a.job_name,algorithm:d,now_qubit:u,now_round:c,time:`${p}s`,tasknameLen:o.length*t.length*s.length,algorithmLen:t.length*s.length,now_qubitLen:s.length})}))}))})),n}async getJobInfoBox({tag:e,job:t}){const a=await J({tag:e,job:t}),n=[],o=Object.keys(a.all_algo_data);return o.forEach((e=>{const t=Object.keys(a.all_algo_data[e]);t.forEach((l=>{const s=Object.keys(a.all_algo_data[e][l].all_round_details);s.forEach((i=>{const r=a.all_algo_data[e][l].all_round_details[i],{algorithm:d,now_qubit:u,now_round:c,data:p,data:{time:g}}=r,m=`${p.cpu[0][2].toFixed(2)}%`,v=`${(p.ram.Total.used/p.ram.Total.total*100).toFixed(2)}%`;n.push({taskname:a.job_name,algorithm:d,now_qubit:u,now_round:c,time:`${g}s`,cpu_speed:m,men_speed:v,cpu_thread:a.cpu_thread,tasknameLen:o.length*t.length*s.length,algorithmLen:t.length*s.length,now_qubitLen:s.length})}))}))})),n}getJobInfoSingleMac(e){const t=[],a=Object.keys(e.all_algo_data);return a.forEach((n=>{const o=Object.keys(e.all_algo_data[n]);o.forEach((l=>{const s=Object.keys(e.all_algo_data[n][l].all_round_details);s.forEach((i=>{const r=e.all_algo_data[n][l].all_round_details[i],{algorithm:d,now_qubit:u,now_round:c,data:p,data:{time:g}}=r,m=`${p.cpu[0][2].toFixed(2)}%`,v=`${(p.ram.Total.used/p.ram.Total.total*100).toFixed(2)}%`;t.push({taskname:e.job_name,algorithm:d,now_qubit:u,now_round:c,time:`${g}s`,cpu_speed:m,men_speed:v,cpu_thread:e.cpu_thread,tasknameLen:a.length*o.length*s.length,algorithmLen:o.length*s.length,now_qubitLen:s.length})}))}))})),t}async getReportBox({tag:e,job:t}){const a=await J({tag:e,job:t}),n=[],o=Object.keys(a.all_algo_data);let l=[];const s={};return o.forEach((e=>{const t=Object.keys(a.all_algo_data[e]);s[e]={},t.forEach((t=>{const n=a.all_algo_data[e][t];s[e][t]={"并行":{best:0,avg:0,worst:0},"CPU使用率":{best:n["cpu_best"][1],avg:n["average_cpu"],worst:n["cpu_last"][1]},"内存使用率":{best:n["ram_best"][1],avg:n["average_ram"],worst:n["ram_last"][1]}}}))})),o.forEach((e=>{const t=Object.keys(a.all_algo_data[e]),o=[];0===l.length&&(l=t),t.forEach((t=>{o.push(a.all_algo_data[e][t].average_time)})),n.push({name:e,type:"line",data:o})})),{lineSeries:n,linelegendData:o,linexAxisData:l,barAllSeries:s}}async getReportSlurm({tag:e,job:t}){const a=await Y({tag:e,job:t}),n=[],o=Object.keys(a.all_algo_data);let l=[];const s={};return o.forEach((e=>{const t=Object.keys(a.all_algo_data[e]);s[e]={},t.forEach((t=>{const n=a.all_algo_data[e][t];s[e][t]={"并行":{best:0,avg:0,worst:0},"CPU使用率":{best:n["cpu_best"][1],avg:n["average_cpu"],worst:n["cpu_last"][1]},"内存使用率":{best:n["ram_best"][1],avg:n["average_ram"],worst:n["ram_last"][1]}}}))})),o.forEach((e=>{const t=Object.keys(a.all_algo_data[e]),o=[];0===l.length&&(l=t),t.forEach((t=>{o.push(a.all_algo_data[e][t].average_time)})),n.push({name:e,type:"line",data:o})})),{lineSeries:n,linelegendData:o,linexAxisData:l,barAllSeries:s}}getReportMac(e){const t=[],a=Object.keys(e.all_algo_data);let n=[];const o={};return a.forEach((t=>{const a=Object.keys(e.all_algo_data[t]);o[t]={},a.forEach((a=>{const n=e.all_algo_data[t][a];o[t][a]={"并行":{best:0,avg:0,worst:0},"CPU使用率":{best:n["cpu_best"][1],avg:n["average_cpu"],worst:n["cpu_last"][1]},"内存使用率":{best:n["ram_best"][1],avg:n["average_ram"],worst:n["ram_last"][1]}}}))})),a.forEach((a=>{const o=Object.keys(e.all_algo_data[a]),l=[];0===n.length&&(n=o),o.forEach((t=>{l.push(e.all_algo_data[a][t].average_time)})),t.push({name:a,type:"line",data:l})})),{lineSeries:t,linelegendData:a,linexAxisData:n,barAllSeries:o}}}class V{socket;constructor(){const e=`ws://${sessionStorage.getItem("boxapi")}:21567`;this.socket=new WebSocket(e)}}const X={style:{padding:"20px"}},ee={class:"ju-end"},te=(0,o.Uk)("box"),ae=(0,o.Uk)("hpc");var ne=(0,o.aZ)({setup(e,{expose:t}){const a=(0,p.tv)();let n=(0,m.iH)({job:"",al:"",qubit:void 0,ip:"",sshUsername:"",sshPassword:""});const l={job:[{required:!0,message:"请输入"}],l:[{required:!0,message:"请输入大于0的数字",pattern:/^[1-9][\d]*$/g}],qubit:[{required:!0,message:"格式：纯数字/半角逗号分隔的一组数字(1,3,5...)，注意数字不能为0开头",pattern:/^[1-9][\d]*(,[1-9][\d]*)*$/g}],ip:[{required:!0,message:"请输入"}],sshUsername:[{required:!0,message:"请输入"}],sshPassword:[{required:!0,message:"请输入"}],al:[{required:!0,message:"请选择"}]};let s=(0,m.iH)();const i=(0,o.Fl)((()=>[{field:"job",label:"任务名称",component:"Input",componentProps:{autocomplete:"off"}},{field:"l",label:"测试轮数",component:"InputNumber"},{field:"qubit",label:"比特数",component:"Input"},{field:"al",label:"算法",component:"Select",componentProps:{options:[{value:"grover",label:"grover"}]}},{field:"node",slot:"node",component:"Slot",label:"节点"}]));let r=(0,m.iH)("box");async function d(e){console.log("运行");try{if(await u(),e(!0),"box"===r.value){const t=new Q;t.runColonyBox(n.value,e),Bt.postMessage({type:"runColonyBox",value:{ip:n.value.ip,user:n.value.sshUsername,pwd:n.value.sshPassword}})}else{const t=new Q;t.runColonyHpc(n.value,e),Bt.postMessage({type:"runColonySlurm",value:{ip:n.value.ip,user:n.value.sshUsername,pwd:n.value.sshPassword}})}}catch{e(!1)}}async function u(){const{validateFields:e}=s.value.useForm();await e()}function c(){"box"===r.value&&"null"!=sessionStorage.getItem("boxapi")||"hpc"===r.value&&"null"!=sessionStorage.getItem("slurmapi")?a.push({path:"/task/list",query:{modelType:"box"===r.value?"colonyBox":"colonySlurm"}}):T.ZP.info("请先跑个测评吧~")}return t({run:d,validateFields:u,GoTask:c}),(e,t)=>{const a=(0,o.up)("a-radio-button"),d=(0,o.up)("a-radio-group"),u=(0,o.up)("a-input"),c=(0,o.up)("a-form-item"),p=(0,o.up)("a-space"),g=(0,o.up)("dv-border-box-12");return(0,o.wg)(),(0,o.iD)("div",null,[((0,o.wg)(),(0,o.j4)(g,{key:(0,m.SU)(r),style:{width:"400px",height:"auto"}},{default:(0,o.w5)((()=>[(0,o._)("div",X,[(0,o._)("div",ee,[(0,o.Wm)(d,{value:(0,m.SU)(r),"onUpdate:value":t[0]||(t[0]=e=>(0,m.dq)(r)?r.value=e:r=e),"button-style":"solid"},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{value:"box"},{default:(0,o.w5)((()=>[te])),_:1}),(0,o.Wm)(a,{value:"hpc"},{default:(0,o.w5)((()=>[ae])),_:1})])),_:1},8,["value"])]),(0,o.Wm)((0,m.SU)(q),{ref_key:"formAppRef",ref:s,formData:(0,m.SU)(n),"onUpdate:formData":t[4]||(t[4]=e=>(0,m.dq)(n)?n.value=e:n=e),schemas:(0,m.SU)(i),"form-rules":l,layout:"vertical"},{node:(0,o.w5)((()=>[(0,o.Wm)(p,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{name:"ip"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{value:(0,m.SU)(n).ip,"onUpdate:value":t[1]||(t[1]=e=>(0,m.SU)(n).ip=e),placeholder:"请输入ip"},null,8,["value"])])),_:1}),(0,o.Wm)(c,{name:"sshUsername"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{value:(0,m.SU)(n).sshUsername,"onUpdate:value":t[2]||(t[2]=e=>(0,m.SU)(n).sshUsername=e),placeholder:"请输入ssh账号"},null,8,["value"])])),_:1}),(0,o.Wm)(c,{name:"sshPassword"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{value:(0,m.SU)(n).sshPassword,"onUpdate:value":t[3]||(t[3]=e=>(0,m.SU)(n).sshPassword=e),placeholder:"请输入ssh密码"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["formData","schemas"])])])),_:1}))])}}});const oe=(0,s.Z)(ne,[["__scopeId","data-v-5be34799"]]);var le=oe;const se=e=>((0,o.dD)("data-v-13eacac8"),e=e(),(0,o.Cn)(),e),ie={class:"ju-sp",style:{position:"fixed",top:"0",left:"0","z-index":"9999"}},re={key:0,class:"left-door"},de={class:"name"},ue=(0,o.Uk)(" QUDOOR "),ce={key:0,class:"right-door"},pe={class:"center-icon"},ge=se((()=>(0,o._)("div",null,"准备中",-1))),me=se((()=>(0,o._)("div",{class:"name"},"启科量子",-1)));var ve=(0,o.aZ)({props:{visible:{type:Boolean}},setup(e){return(t,a)=>{const l=(0,o.up)("dv-decoration-6"),s=(0,o.up)("dv-decoration-12");return(0,o.wg)(),(0,o.iD)("div",ie,[(0,o.Wm)(n.uT,{mode:"out-in","enter-active-class":"animate__animated animate__bounceInLeft animate__faster","leave-active-class":"animate__animated animate__bounceOutLeft "},{default:(0,o.w5)((()=>[e.visible?((0,o.wg)(),(0,o.iD)("div",re,[(0,o._)("div",de,[ue,(0,o.Wm)(l,{style:{width:"300px",height:"30px"}})])])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(n.uT,{mode:"out-in","enter-active-class":"animate__animated animate__bounceInRight animate__faster","leave-active-class":"animate__animated animate__bounceOutRight"},{default:(0,o.w5)((()=>[e.visible?((0,o.wg)(),(0,o.iD)("div",ce,[(0,o._)("div",pe,[(0,o.Wm)(s,{style:{width:"150px",height:"150px",background:"rgb(0, 5, 28, 0.8)","border-radius":"150px"}}),ge]),me])):(0,o.kq)("",!0)])),_:1})])}}});const he=(0,s.Z)(ve,[["__scopeId","data-v-13eacac8"]]);var ye=he;const fe={class:"ju-center align-center",style:{"min-height":"100vh"}},_e={style:{padding:"8px"}},be={class:"main"},we={class:"ju-sp align-center",style:{width:"1000px"}},xe={class:"left align-center"},Se={class:"left-title"},ke=(0,o._)("p",{class:"left-remark"},"欢迎使用启科测评系统",-1),Ie=(0,o._)("div",{class:"btn"},"开始",-1),Ue=(0,o.Uk)("任务管理");var Ce=(0,o.aZ)({setup(e,{expose:t}){const a=(0,p.tv)();let l=(0,m.iH)("single"),s=(0,m.iH)(!1);function i(){l.value="single"===l.value?"colony":"single"}let r=(0,m.iH)(),d=(0,m.iH)();function u(e){"single"!==e?d.value.GoTask():a.push({path:"/task/list",query:{modelType:e}})}async function c(){if("colony"===l.value)return void d.value.run((e=>{s.value=e}));if("single"===l.value){const e=sessionStorage.getItem("osType"),t=await r.value.run();s.value=!0;const{user_id:a,department_id:n,ss:o,name:l}=t;if("Darwin"===e){const e=new Q;return e.runSingleMac(t),void Bt.postMessage({type:"runSingleMac",value:{round:a,step:n,algo:o,job:l}})}{const e=new Q;return e.runSingleWin(t),void Bt.postMessage({type:"runSingleWin",value:{round:a,step:n,algo:o,job:l}})}}const e=sessionStorage.getItem("osType");if("Darwin"===e){const e=await r.value.run();s.value=!0;const{user_id:t,department_id:a,ss:n,name:o}=e,l=new Q;return l.runSingleMac(e),void Bt.postMessage({type:"runSingleMac",value:{round:t,step:a,algo:n,job:o}})}}return t({}),(e,t)=>{const a=(0,o.up)("dv-decoration-11"),p=(0,o.up)("dv-decoration-9"),v=(0,o.up)("dv-border-box1");return(0,o.wg)(),(0,o.iD)("div",fe,[(0,o.Wm)(v,{style:{width:"80vw","min-width":"1200px","max-width":"1700px",position:"relative"}},{default:(0,o.w5)((()=>[(0,o._)("div",_e,[(0,o._)("div",be,[(0,o._)("div",{class:"main-tab",onClick:i},[(0,o.Wm)(a,{style:{width:"200px",height:"60px"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" 切换至"+(0,g.zw)("single"===(0,m.SU)(l)?"远程模式":"本机模式"),1)])),_:1})]),(0,o._)("div",we,[(0,o.Wm)(n.uT,{mode:"out-in","enter-active-class":"animate__animated animate__fadeInLeft animate__faster","leave-active-class":"animate__animated animate__fadeOutLeft animate__faster"},{default:(0,o.w5)((()=>["single"===(0,m.SU)(l)?((0,o.wg)(),(0,o.j4)(H,{key:0,ref_key:"inputRef",ref:r,onChangeEvent:e.changeEvent},null,8,["onChangeEvent"])):((0,o.wg)(),(0,o.j4)(le,{key:1,ref_key:"colonyRef",ref:d},null,512))])),_:1}),(0,o._)("div",xe,[(0,o.Wm)(n.uT,{mode:"out-in","enter-active-class":"animate__animated animate__zoomIn animate__faster","leave-active-class":"animate__animated animate__zoomOut animate__faster"},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)("div",{key:(0,m.SU)(l)},[(0,o._)("h1",Se,(0,g.zw)("single"===(0,m.SU)(l)?"本机模式":"远程模式"),1),ke]))])),_:1}),(0,o.Wm)(p,{style:{width:"200px",height:"200px",cursor:"pointer","margin-top":"50px"},onClick:c},{default:(0,o.w5)((()=>[Ie])),_:1})])])])]),(0,o._)("div",{class:"go-task",onClick:t[0]||(t[0]=e=>u((0,m.SU)(l)))},[(0,o.Wm)(a,{style:{width:"200px",height:"60px"}},{default:(0,o.w5)((()=>[Ue])),_:1})])])),_:1}),(0,o.Wm)(ye,{visible:(0,m.SU)(s)},null,8,["visible"])])}}});const je=Ce;var Pe=je,Oe=a(8645);function qe(e,t){const a=Oe.S1(e,t),n={xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[{data:[],type:"bar"}]};async function o(e){a.setOption({MyOptions:n,...e},!0)}function l(){a.resize()}return{myChart:a,setOption:o,resizeMychart:l}}const We={style:{padding:"40px 20px"}},Le=(0,o.Uk)("重新测评"),De=(0,o.Uk)(" 详细列表 "),He=(0,o.Uk)(" 硬件信息 "),Te={class:"ju-sp"},Me={style:{padding:"20px"}},Ee={style:{padding:"20px",position:"relative"}},Ae={class:"select-item"},Re={style:{position:"relative"}},Ze={class:"select-item"};var $e=(0,o.aZ)({setup(e,{expose:t}){const a=(0,p.yj)();let n=(0,m.iH)([]),l=(0,m.iH)([]),s={backgroundColor:"",tooltip:{trigger:"axis"},title:{text:"量子计算模拟能力",subtext:"Quantum Simulation Capability Index (QSCI)"},legend:{data:[]},radar:{indicator:[{name:"并行",max:24},{name:"网络In",max:30720},{name:"网络Out",max:102400},{name:"内存使用率",max:100},{name:"cpu使用率",max:100}]},color:"rgb(255,228,52)",series:[]},i={backgroundColor:"",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:"量子计算模拟能力",subtext:"Quantum Simulation Capability Index (QSCI)"},grid:{top:150,left:50,right:50},xAxis:{type:"category",data:[]},yAxis:{type:"value",max:100,axisLine:{show:!0}},legend:{top:80,data:["best","avg","worst"]},series:[{name:"best",data:[],type:"bar",label:{show:!0,color:"#fff",formatter:"{a}",position:"top"}},{name:"avg",data:[],type:"bar",label:{show:!0,color:"#fff",formatter:"{a}",position:"top"}},{name:"worst",data:[],type:"bar",label:{show:!0,color:"#fff",formatter:"{a}",position:"top"}}]},r={backgroundColor:"",title:{text:"量子计算模拟能力",subtext:"Quantum Simulation Capability Index (QSCI)"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["CPU","MEMORY"],top:80},grid:{left:"3%",right:"4%",bottom:"3%",top:"150",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["5","10","15","20","25","30"]},yAxis:{type:"value",axisLine:{show:!0},name:"运行时间(ms)"},series:[{name:"random",type:"line",data:[24,510,4023,32698,243796,445e3]},{name:"Shor",type:"line",data:[600,8e3,18023,5e4,1e5,2e5]}]};const d=(0,m.iH)(),u=(0,m.iH)(),c=(0,m.iH)();let v,h,y;const f=a.query.modelType;let _=(0,m.iH)(!0);(0,o.bv)((()=>{(0,o.Y3)((()=>{"single"===f?P():"colonyBox"===f?I():"colonySlurm"===f&&U(),v=qe(d.value,"dark").myChart,h=qe(u.value,"dark").myChart,y=qe(c.value,"dark").myChart,window.onresize=()=>{v.resize(),h.resize(),y.resize()}}))}));let b,w=(0,m.iH)(),x=(0,m.iH)();const S=sessionStorage.getItem("osType");let k=(0,m.iH)();async function I(){const{getReportBox:e}=new N,{tag:t,job:o}=a.query,{lineSeries:s,linelegendData:i,linexAxisData:d,barAllSeries:u}=await e({tag:t,job:o});r.legend.data=i,r.series=s,r.xAxis.data=d,n.value=Object.keys(u),w.value=n.value[0],l.value=Object.keys(u[w.value]),k.value=x.value=l.value[0],b=u,C(),j(),v.setOption(r,!0),_.value=!1}async function U(){const{getReportSlurm:e}=new N,{tag:t,job:o}=a.query,{lineSeries:s,linelegendData:i,linexAxisData:d,barAllSeries:u}=await e({tag:t,job:o});r.legend.data=i,r.series=s,r.xAxis.data=d,n.value=Object.keys(u),w.value=n.value[0],l.value=Object.keys(u[w.value]),k.value=x.value=l.value[0],b=u,C(),j(),v.setOption(r,!0),_.value=!1}function C(){s.series=[],n.value.forEach((e=>{s.series.push({name:e,type:"radar",data:[{value:[0,0,0,b[e][k.value]["内存使用率"].avg,b[e][k.value]["CPU使用率"].avg],name:"数据"}]})})),s.legend.data=n.value,y.setOption(s,!0)}function j(){let e=Object.keys(b[w.value][x.value]),t=e.map((e=>b[w.value][x.value][e].best)),a=e.map((e=>b[w.value][x.value][e].avg)),n=e.map((e=>b[w.value][x.value][e].worst));i.series[0].data=t,i.series[1].data=a,i.series[2].data=n,i.xAxis.data=e,h.setOption(i,!0)}function P(){const{tag:e,job:t}=a.query;function o({data:e}){const{type:t,value:a}=e;if("getJobResultSingleMac"===t||"getJobResultSingleWin"===t){const e=new N,{lineSeries:t,linelegendData:s,linexAxisData:i,barAllSeries:d}=e.getReportMac(a);r.legend.data=s,r.series=t,r.xAxis.data=i,n.value=Object.keys(d),w.value=n.value[0],l.value=Object.keys(d[w.value]),k.value=x.value=l.value[0],b=d,C(),j(),v.setOption(r,!0),window.removeEventListener("message",o),_.value=!1}}window.addEventListener("message",o),Bt.postMessage({type:"Darwin"===S?"getJobResultSingleMac":"getJobResultSingleWin",value:{tag:e,job:t}})}return t({}),(e,t)=>{const a=(0,o.up)("dv-decoration-11"),s=(0,o.up)("a-space"),i=(0,o.up)("dv-border-box-10"),r=(0,o.up)("a-select-option"),p=(0,o.up)("a-select"),v=(0,o.up)("dv-decoration-10");return(0,o.wg)(),(0,o.iD)("div",We,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,{class:"_action_btn",onClick:t[0]||(t[0]=t=>e.$router.push("/"))},{default:(0,o.w5)((()=>[Le])),_:1}),(0,o.Wm)(a,{class:"_action_btn",onClick:t[1]||(t[1]=t=>e.$router.push({path:"/result/list",query:e.$route.query}))},{default:(0,o.w5)((()=>[De])),_:1}),(0,o.Wm)(a,{class:"_action_btn",onClick:t[2]||(t[2]=t=>e.$router.push({path:"/result/hardware_table",query:e.$route.query}))},{default:(0,o.w5)((()=>[He])),_:1})])),_:1}),(0,o._)("div",Te,[(0,o.Wm)(i,{style:{width:"100%","margin-right":"20px"}},{default:(0,o.w5)((()=>[(0,o._)("div",Me,[(0,o._)("div",{ref_key:"lineRef",ref:d,class:"graph"},null,512)])])),_:1}),(0,o.Wm)(i,{style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o._)("div",Ee,[(0,o._)("div",Ae,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{value:(0,m.SU)(k),"onUpdate:value":t[3]||(t[3]=e=>(0,m.dq)(k)?k.value=e:k=e),placeholder:"请选择比特数",class:"select",onChange:C},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,m.SU)(l),(e=>((0,o.wg)(),(0,o.j4)(r,{key:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e),1)])),_:2},1024)))),128))])),_:1},8,["value"])])),_:1})]),(0,o._)("div",{ref_key:"radarRef",ref:c,class:"graph"},null,512)])])),_:1})]),(0,o.Wm)(v,{style:{width:"100%",height:"5px",margin:"10px auto"}}),(0,o._)("div",Re,[(0,o._)("div",Ze,[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{value:(0,m.SU)(w),"onUpdate:value":t[4]||(t[4]=e=>(0,m.dq)(w)?w.value=e:w=e),placeholder:"请选择算法",class:"select",onChange:j},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,m.SU)(n),(e=>((0,o.wg)(),(0,o.j4)(r,{key:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e),1)])),_:2},1024)))),128))])),_:1},8,["value"]),(0,o.Wm)(p,{value:(0,m.SU)(x),"onUpdate:value":t[5]||(t[5]=e=>(0,m.dq)(x)?x.value=e:x=e),placeholder:"请选择比特数",class:"select",onChange:j},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,m.SU)(l),(e=>((0,o.wg)(),(0,o.j4)(r,{key:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e),1)])),_:2},1024)))),128))])),_:1},8,["value"])])),_:1})]),(0,o._)("div",{ref_key:"barRef",ref:u,class:"graph",style:{margin:"0px 20px"}},null,512)]),(0,o.Wm)(ye,{visible:(0,m.SU)(_)},null,8,["visible"])])}}});const Be=(0,s.Z)($e,[["__scopeId","data-v-c96c8d72"]]);var Fe=Be;const Je={colonyBox:[{title:"IP",dataIndex:["IP","ip"]},{title:"OS",children:[{title:"名称",dataIndex:["OS","名称"]}]},{title:"CPU",children:[{title:"规格型号",dataIndex:["CPU","型号名称"]},{title:"主频",dataIndex:["CPU","主频"]},{title:"每个座的核数",dataIndex:["CPU","每个座的核数"]},{title:"每个核的线程数",dataIndex:["CPU","每个核的线程数"]},{title:"L1Cache",dataIndex:["CPU","L1i 缓存"]},{title:"L2Cache",dataIndex:["CPU","L2 缓存"]},{title:"指令集",dataIndex:["CPU","指令集"]}]},{title:"GPU",dataIndex:"name",children:[{title:"型号",dataIndex:["GPU","型号"]},{title:"算力",dataIndex:["GPU","算力"]},{title:"主频",dataIndex:["GPU","主频"]}]},{title:"内存",dataIndex:"内存",children:[{title:"类型",dataIndex:["内存","Type"]},{title:"通道数",dataIndex:["内存","通道数"]},{title:"大小",dataIndex:["内存","MemTotal"]},{title:"频率",dataIndex:["内存","Speed"]}]},{title:"网络I/O",dataIndex:"网络I/O",children:[{title:"上行",dataIndex:["网络I/O","上行"]},{title:"下行",dataIndex:["网络I/O","下行"]}]},{title:"磁盘I/O",dataIndex:"磁盘I/O",children:[{title:"读",dataIndex:["磁盘I/O","读"]},{title:"写",dataIndex:["磁盘I/O","写"]}]},{title:"操作",key:"actions",fixed:"right"}],single:[{title:"IP",dataIndex:["ip","ip"]},{title:"OS",dataIndex:"OS",children:[{title:"名称",dataIndex:["OS","名称"]},{title:"位",dataIndex:["OS","位"]}]},{title:"CPU",dataIndex:"CPU",children:[{title:"规格型号",dataIndex:["CPU","CPU型号"]},{title:"主频",dataIndex:["CPU","主频"]},{title:"核心数",dataIndex:["CPU","核心数"]},{title:"线程数",dataIndex:["CPU","线程数"]},{title:"L1Cache",dataIndex:["CPU","L1 Cache"]},{title:"L2Cache",dataIndex:["CPU","L2 Cache"]},{title:"指令集",dataIndex:["CPU","指令集"]}]},{title:"内存",dataIndex:"内存",children:[{title:"类型",dataIndex:["内存","内存类型"]},{title:"通道数",dataIndex:["内存","通道数"]},{title:"大小",dataIndex:["内存","大小"]},{title:"频率",dataIndex:["内存","频率"]}]},{title:"网络I/O",dataIndex:"网络I/O",children:[{title:"上行",dataIndex:["网络I/O","上行"]},{title:"下行",dataIndex:["网络I/O","下行"]}]},{title:"磁盘I/O",dataIndex:"磁盘I/O",children:[{title:"读",dataIndex:["磁盘I/O","读"]},{title:"写",dataIndex:["磁盘I/O","写"]}]},{title:"操作",key:"actions",fixed:"right"}],singleMac:[{title:"IP",dataIndex:["ip","ip"]},{title:"OS",children:[{title:"名称",dataIndex:["OS","名称"]}]},{title:"CPU",children:[{title:"规格型号",dataIndex:["CPU","machdep.cpu.brand_string"]},{title:"主频",dataIndex:["CPU","machdep.cpu.extfeature_bits"]},{title:"核数",dataIndex:["CPU","machdep.cpu.core_count"]},{title:"线程数",dataIndex:["CPU","machdep.cpu.thread_count"]},{title:"L1Cache",dataIndex:["CPU","L1i 缓存"]},{title:"L2Cache",dataIndex:["CPU","machdep.cpu.cache.size"]},{title:"指令集",dataIndex:["CPU","machdep.cpu.features"]}]},{title:"内存",children:[{title:"类型",dataIndex:["ram","Type"]},{title:"通道数",dataIndex:["ram","通道数"]},{title:"大小",dataIndex:["ram","total"]},{title:"频率",dataIndex:["ram","Speed"]}]},{title:"操作",key:"actions",fixed:"right"}]},ze={colonyBox:[{title:"任务名称",dataIndex:"taskname",customCell:(e,t)=>0===t?{rowSpan:e.tasknameLen}:{rowSpan:0}},{title:"算法名称",dataIndex:"algorithm",customCell:(e,t)=>t%e.algorithmLen===0?{rowSpan:e.algorithmLen}:{rowSpan:0}},{title:"量子比特数",dataIndex:"now_qubit",customCell:(e,t)=>t%e.now_qubitLen===0?{rowSpan:e.now_qubitLen}:{rowSpan:0}},{title:"测试轮次",dataIndex:"now_round"},{title:"运行用时",dataIndex:["time"]},{title:"线程数",dataIndex:"cpu_thread"},{title:"cpu使用率",dataIndex:"cpu_speed"},{title:"内存使用率",dataIndex:"men_speed"}],single:[{title:"任务名称",dataIndex:"taskname"},{title:"算法名称",dataIndex:"name"},{title:"量子比特数",dataIndex:"number"},{title:"运行用时",dataIndex:"excution_time"},{title:"线程数",dataIndex:"cpu_threads"},{title:"cpu使用率",dataIndex:"cpu_speed"},{title:"内存使用率",dataIndex:"men_speed"}],colonySlurm:[{title:"任务名称",dataIndex:"taskname",customCell:(e,t)=>0===t?{rowSpan:e.tasknameLen}:{rowSpan:0}},{title:"算法名称",dataIndex:"algorithm",customCell:(e,t)=>t%e.algorithmLen===0?{rowSpan:e.algorithmLen}:{rowSpan:0}},{title:"量子比特数",dataIndex:"now_qubit",customCell:(e,t)=>t%e.now_qubitLen===0?{rowSpan:e.now_qubitLen}:{rowSpan:0}},{title:"测试轮次",dataIndex:"now_round"},{title:"运行用时",dataIndex:["time"]}]},Ge={style:{padding:"40px 20px"}},Ye=(0,o.Uk)("重新测评"),Ke=(0,o.Uk)(" 详细报告 "),Qe=(0,o.Uk)(" 硬件信息 ");var Ne=(0,o.aZ)({setup(e){const t=(0,p.yj)();let a=(0,m.iH)([]),n=(0,m.iH)(!1);const l=t.query.modelType,{getJobInfoSingleMac:s}=new N;function i(e){const{type:t,value:o}=e.data;"getJobResultSingleMac"!==t&&"getJobResultSingleWin"!==t||(a.value=s(o),n.value=!1)}function r(){if(n.value=!0,window.addEventListener("message",i),"Darwin"!==sessionStorage.getItem("osType")){const{tag:e,job:a}=t.query;Bt.postMessage({type:"getJobResultSingleWin",value:{tag:e,job:a}})}else{const{tag:e,job:a}=t.query;Bt.postMessage({type:"getJobResultSingleMac",value:{tag:e,job:a}})}}async function d(){const{tag:e,job:o}=t.query;n.value=!0;const l=new N,s=await l.getJobInfoBox({tag:e,job:o});a.value=s,n.value=!1}async function u(){const{tag:e,job:o}=t.query;n.value=!0;const l=new N,s=await l.getJobInfoHpc({tag:e,job:o});a.value=s,n.value=!1}return"single"===l?r():"colonyBox"===l?d():"colonySlurm"===l&&u(),(0,o.Ah)((()=>{window.removeEventListener("message",i)})),(e,t)=>{const s=(0,o.up)("dv-decoration-11"),i=(0,o.up)("a-space"),r=(0,o.up)("a-table");return(0,o.wg)(),(0,o.iD)("div",Ge,[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"_action_btn",onClick:t[0]||(t[0]=t=>e.$router.push("/"))},{default:(0,o.w5)((()=>[Ye])),_:1}),"colonySlurm"!==(0,m.SU)(l)?((0,o.wg)(),(0,o.j4)(s,{key:0,class:"_action_btn",onClick:t[1]||(t[1]=t=>e.$router.push({path:"/result/report",query:e.$route.query}))},{default:(0,o.w5)((()=>[Ke])),_:1})):(0,o.kq)("",!0),"colonySlurm"!==(0,m.SU)(l)?((0,o.wg)(),(0,o.j4)(s,{key:1,class:"_action_btn",onClick:t[2]||(t[2]=t=>e.$router.push({path:"/result/hardware_table",query:e.$route.query}))},{default:(0,o.w5)((()=>[Qe])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(r,{columns:(0,m.SU)(ze)["single"===(0,m.SU)(l)?"colonyBox":(0,m.SU)(l)],"data-source":(0,m.SU)(a),style:{"margin-top":"10px"},bordered:"",loading:(0,m.SU)(n)},null,8,["columns","data-source","loading"])])}}});const Ve=Ne;var Xe=Ve;const et={style:{padding:"40px 20px"}},tt=(0,o.Uk)("返回"),at={class:"ju-sp"},nt={style:{padding:"20px"}},ot={style:{padding:"20px"}};var lt=(0,o.aZ)({setup(e,{expose:t}){let a={backgroundColor:"",title:{text:"量子计算模拟能力",subtext:"Quantum Simulation Capability Index (QSCI)"},legend:{data:["Allocated Budget","Actual Spending"]},radar:{indicator:[{name:"并行",max:24},{name:"网络In",max:30720},{name:"网络Out",max:102400},{name:"内存使用率",max:100},{name:"cpu使用率",max:100}]},color:"rgb(255,228,52)"},n={backgroundColor:"",title:{text:"量子计算模拟能力",subtext:"Quantum Simulation Capability Index (QSCI)"},grid:{top:150,left:50,right:50},xAxis:{type:"category",data:["cpu核数","运行性能","资源使用"]},yAxis:{type:"value",max:2500,axisLine:{show:!0}},legend:{top:80,data:["best","avg","yours"]},series:[{name:"best",data:[1,0,2e3],type:"bar",label:{show:!0,color:"#fff",formatter:"{a}",position:"top"}},{name:"avg",data:[800,0,1500],type:"bar",label:{show:!0,color:"#fff",formatter:"{a}",position:"top"}},{name:"yours",data:[900,0,1700],type:"bar",label:{show:!0,color:"#fff",formatter:"{a}",position:"top"}}]},l={backgroundColor:"",title:{text:"量子计算模拟能力",subtext:"Quantum Simulation Capability Index (QSCI)"},legend:{data:["CPU","MEMORY"],top:80},grid:{left:"3%",right:"4%",bottom:"3%",top:"150",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["5","10","15","20","25","30"]},yAxis:{type:"value",axisLine:{show:!0},name:"运行时间(ms)"},series:[{name:"random",type:"line",data:[24,510,4023,32698,243796,445e3]},{name:"Shor",type:"line",data:[600,8e3,18023,5e4,1e5,2e5]}]};const s=(0,m.iH)(),i=(0,m.iH)(),r=(0,m.iH)();return(0,o.bv)((()=>{(0,o.Y3)((()=>{let{myChart:e}=qe(s.value,"dark");e.setOption(l);let{myChart:t}=qe(i.value,"dark");t.setOption(n);let{myChart:o}=qe(r.value,"dark");o.setOption(a),window.onresize=()=>{e.resize(),t.resize(),o.resize()}}));const e=window.sessionStorage.getItem("historical-report");l=JSON.parse(e).line.line,n=JSON.parse(e).bar.bar,a=Object.assign(a,JSON.parse(e).radar.radar)})),t({}),(e,t)=>{const a=(0,o.up)("dv-decoration-11"),n=(0,o.up)("a-space"),l=(0,o.up)("dv-border-box-10"),d=(0,o.up)("dv-decoration-10");return(0,o.wg)(),(0,o.iD)("div",et,[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,{class:"_action_btn",onClick:t[0]||(t[0]=t=>e.$router.back())},{default:(0,o.w5)((()=>[tt])),_:1})])),_:1}),(0,o._)("div",at,[(0,o.Wm)(l,{style:{width:"100%","margin-right":"20px"}},{default:(0,o.w5)((()=>[(0,o._)("div",nt,[(0,o._)("div",{ref_key:"lineRef",ref:s,class:"graph"},null,512)])])),_:1}),(0,o.Wm)(l,{style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o._)("div",ot,[(0,o._)("div",{ref_key:"radarRef",ref:r,class:"graph"},null,512)])])),_:1})]),(0,o.Wm)(d,{style:{width:"100%",height:"5px",margin:"10px auto"}}),(0,o._)("div",{ref_key:"barRef",ref:i,class:"graph",style:{margin:"0px 20px"}},null,512)])}}});const st=(0,s.Z)(lt,[["__scopeId","data-v-06757e4e"]]);var it=st;const rt={style:{padding:"40px 20px"}},dt={class:"ju-sp align-center"},ut=(0,o.Uk)("重新测评"),ct={key:0,class:"align-center"},pt=(0,o.Uk)(" 详情 "),gt=(0,o.Uk)(" 报告 "),mt=(0,o.Uk)(" 硬件信息 ");var vt=(0,o.aZ)({setup(e){const t=[{title:"任务名称",dataIndex:"job"},{title:"测评状态",dataIndex:"status"},{title:"任务开始时间",dataIndex:"time"},{title:"提交时间",dataIndex:"time"},{title:"操作",dataIndex:"actions",width:200}];let a=(0,m.iH)([]),n=(0,m.iH)(!0);const l=(0,p.tv)(),s=(0,p.yj)(),i=s.query.modelType;let r,d=(0,m.iH)(""),u=(0,m.iH)([]);async function c(){try{const e=new N,t=await e.getJobListBox();a.value=t,r=setTimeout((()=>{c()}),3e3)}catch(e){clearTimeout(r)}finally{n.value=!1}}async function v(){try{const e=new N,t=await e.getJobListHpc();a.value=t,r=setTimeout((()=>{v()}),3e3)}catch(e){clearTimeout(r)}finally{n.value=!1}}const h=sessionStorage.getItem("osType");function y(){n.value=!0,Bt.postMessage({type:"Darwin"===h?"getJobListSingleMac":"getJobListSingleWin"}),window.addEventListener("message",f)}function f({data:e}){const{type:t,value:o}=e;"getJobListSingleMac"!==t&&"getJobListSingleWin"!==t||(a.value=o,n.value=!1)}function _(e,t){l.push({path:e,query:{tag:t.tag,job:t.job,modelType:i}})}function b(e){sessionStorage.setItem("colonyBox"===i?"boxapi":"slurmapi",e),a.value=[],n.value=!0,clearTimeout(r),"colonyBox"===i?c():v()}return"single"===i?y():"colonyBox"===i?(u.value=JSON.parse(sessionStorage.getItem("boxApiList")),d.value=sessionStorage.getItem("boxapi"),c()):"colonySlurm"===i&&(u.value=JSON.parse(sessionStorage.getItem("slurmApiList")),d.value=sessionStorage.getItem("slurmapi"),v()),(0,o.Ah)((()=>{clearTimeout(r)})),(e,l)=>{const s=(0,o.up)("dv-decoration-11"),r=(0,o.up)("a-select-option"),c=(0,o.up)("a-select"),p=(0,o.up)("a-button"),v=(0,o.up)("a-table");return(0,o.wg)(),(0,o.iD)("div",rt,[(0,o._)("div",dt,[(0,o.Wm)(s,{class:"_action_btn",onClick:l[0]||(l[0]=t=>e.$router.push("/"))},{default:(0,o.w5)((()=>[ut])),_:1}),"single"!==(0,m.SU)(i)?((0,o.wg)(),(0,o.j4)(c,{key:0,value:(0,m.SU)(d),"onUpdate:value":l[1]||(l[1]=e=>(0,m.dq)(d)?d.value=e:d=e),style:{width:"150px"},placeholder:"请选择测评设备",disabled:(0,m.SU)(n),onChange:b},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,m.SU)(u),(e=>((0,o.wg)(),(0,o.j4)(r,{key:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e),1)])),_:2},1024)))),128))])),_:1},8,["value","disabled"])):(0,o.kq)("",!0)]),(0,o.Wm)(v,{columns:t,"data-source":(0,m.SU)(a),style:{"margin-top":"10px"},bordered:"",loading:(0,m.SU)(n)},{bodyCell:(0,o.w5)((({column:e,record:t})=>["actions"===e.dataIndex?((0,o.wg)(),(0,o.iD)("div",ct,[(0,o.Wm)(p,{type:"link",disabled:"任务已完成"!==t.status,onClick:e=>_("/result/list",t)},{default:(0,o.w5)((()=>[pt])),_:2},1032,["disabled","onClick"]),"colonySlurm"!==(0,m.SU)(i)?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(p,{type:"link",disabled:"任务已完成"!==t.status,onClick:e=>_("/result/report",t)},{default:(0,o.w5)((()=>[gt])),_:2},1032,["disabled","onClick"]),(0,o.Wm)(p,{type:"link",disabled:"任务已完成"!==t.status,onClick:e=>_("/result/hardware_table",t)},{default:(0,o.w5)((()=>[mt])),_:2},1032,["disabled","onClick"])],64)):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:1},8,["data-source","loading"])])}}});const ht=vt;var yt=ht;const ft={class:"list"};var _t=(0,o.aZ)({props:{detailData:null},setup(e){return(t,a)=>{const n=(0,o.up)("a-descriptions-item"),l=(0,o.up)("a-descriptions"),s=(0,o.up)("a-tab-pane"),i=(0,o.up)("a-tabs");return(0,o.wg)(),(0,o.j4)(i,{activeKey:t.activeKey,"onUpdate:activeKey":a[0]||(a[0]=e=>t.activeKey=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.detailData,((e,t)=>((0,o.wg)(),(0,o.j4)(s,{key:t,tab:t},{default:(0,o.w5)((()=>[(0,o._)("div",ft,[(0,o.Wm)(l,{bordered:"",column:2},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e,((e,t)=>((0,o.wg)(),(0,o.j4)(n,{key:t,label:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,g.zw)(e),1)])),_:2},1032,["label"])))),128))])),_:2},1024)])])),_:2},1032,["tab"])))),128))])),_:1},8,["activeKey"])}}});const bt=(0,s.Z)(_t,[["__scopeId","data-v-612fad25"]]);var wt=bt;const xt={style:{padding:"40px 20px"}},St=(0,o.Uk)("返回"),kt=(0,o.Uk)("重新测评"),It=["onClick"];var Ut=(0,o.aZ)({setup(e){const t=(0,p.yj)(),a=sessionStorage.getItem("osType"),n=t.query.modelType,l=Je["Darwin"===a&&"single"===n?"singleMac":n];let s=(0,m.iH)([]),i=(0,m.iH)(!1),r=(0,m.iH)(!0),d=(0,m.iH)({});function u(e){i.value=!0,d.value=e}function c(){window.addEventListener("message",(e=>{const{type:t,value:a}=e.data;"getHardwareInfo"!==t&&"getHardwareInfoSingleMac"!==t||(r.value=!1,s.value=a)})),Bt.postMessage({type:"Darwin"===a?"getHardwareInfoSingleMac":"getHardwareInfo"})}async function g(){r.value=!0;const e=new N,t=await e.getHardwareInfoBox();s.value=t,r.value=!1}return"single"===t.query.modelType?c():"colonyBox"===t.query.modelType&&g(),(e,t)=>{const a=(0,o.up)("dv-decoration-11"),n=(0,o.up)("a-space"),c=(0,o.up)("a-table"),p=(0,o.up)("a-modal");return(0,o.wg)(),(0,o.iD)("div",xt,[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(a,{class:"_action_btn",onClick:t[0]||(t[0]=t=>e.$router.back())},{default:(0,o.w5)((()=>[St])),_:1}),(0,o.Wm)(a,{class:"_action_btn",onClick:t[1]||(t[1]=t=>e.$router.push("/"))},{default:(0,o.w5)((()=>[kt])),_:1})])),_:1}),(0,o.Wm)(c,{columns:(0,m.SU)(l),"data-source":(0,m.SU)(s),style:{"margin-top":"10px"},bordered:"",scroll:{x:3500},loading:(0,m.SU)(r)},{bodyCell:(0,o.w5)((({column:e,record:t})=>["actions"===e.key?((0,o.wg)(),(0,o.iD)("a",{key:0,onClick:e=>u(t)},"硬件详情",8,It)):(0,o.kq)("",!0)])),_:1},8,["columns","data-source","loading"]),(0,o.Wm)(p,{visible:(0,m.SU)(i),"onUpdate:visible":t[2]||(t[2]=e=>(0,m.dq)(i)?i.value=e:i=e),title:"硬件详情",width:"800px"},{default:(0,o.w5)((()=>[(0,o.Wm)(wt,{"detail-data":(0,m.SU)(d)},null,8,["detail-data"])])),_:1},8,["visible"])])}}});const Ct=Ut;var jt=Ct;const Pt={style:{position:"relative"}},Ot=(0,o.Uk)("重新测评"),qt={class:"ju-sp align-center"},Wt={style:{flex:"1",padding:"20px","max-height":"420px","overflow-y":"auto"}},Lt={class:"card"},Dt=["src"],Ht={class:"card-label"};var Tt=(0,o.aZ)({setup(e){const t=(0,p.yj)(),n=(0,p.tv)();let l=(0,m.iH)(!0);const s=(0,m.iH)(),i=(0,m.iH)();let r,d,u={backgroundColor:"",tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"Pressure",type:"gauge",axisLine:{lineStyle:{width:6,color:[[.9,"#00ffff"],[1,"#FF6E76"]]}},axisTick:{length:12,lineStyle:{color:"auto",width:2}},splitLine:{length:20,lineStyle:{color:"auto",width:5}},pointer:{itemStyle:{color:"auto"}},detail:{valueAnimation:!0,formatter:"{value}%"},data:[{value:Math.floor(10*Math.random()+90),name:"cpu总使用率"}]}]},c={grid:{right:50,left:10,top:50,bottom:20,containLabel:!0},backgroundColor:"",visualMap:[{show:!1,type:"continuous",seriesIndex:0,min:0,max:100}],xAxis:[{boundaryGap:!1,splitLine:{show:!1},data:[],name:"时间"}],yAxis:[{name:"内存占用率(%)",type:"value",max:100}],series:[{type:"line",data:[]}]},v=(0,m.iH)([]),h=a(5404),y=a(1124),f=a(2918);function _(e){const{type:a,value:s,pid:i}=e.data;if(b=i,"getRevalCharts"===a||"getRevalChartsSingleMac"===a){if(!s)return;if(["done\r\n","done"].includes(s)||"done"===s.substring(s.length-4,s.length)||"done\r\n"===s.substring(s.length-5,s.length))return void n.push({path:"/result/list",query:{...t.query}});let e=JSON.parse(s);u.series[0].data[0].value=parseFloat(e.cpu.find((e=>"all"===e[1]))[2]).toFixed(2),r.setOption(u);const a=e.cpu.filter((e=>"all"!==e[1])).map((e=>({name:`CPU-${e[1]}使用率`,value:parseFloat(e[2]),unit:"%",img:h}))),i=Math.round(1e4*parseFloat(e.ram.used)/parseFloat(e.ram.total))/100,p={name:"内存占用率",value:i,img:y,unit:"%"},g=[];let m=Object.keys(e.disk);m.forEach((t=>{let a=e.disk[t];""!==a["wkB/s"]&&(g.push({name:`磁盘${t}写入`,value:parseFloat(a["wkB/s"]),unit:"kb/s",img:f}),g.push({name:`磁盘${t}读取`,value:parseFloat(a["rkB/s"]),unit:"kb/s",img:f}))})),v.value=[...a,p,...g],c.series[0].data.push(i),c.series[0].data.length>50&&(c.series[0].data.shift(),c.xAxis[0].data.shift()),c.xAxis[0].data.push(e.ram.time),d.setOption(c),l.value&&(0,o.Y3)((()=>{l.value=!1}))}}let b="";const w=t.query.modelType;function x(){window.addEventListener("message",_);const e=sessionStorage.getItem("osType"),{tag:a,job:n}=t.query;"Darwin"===e?Bt.postMessage({type:"getRevalChartsSingleMac",value:{tag:a,job:n}}):Bt.postMessage({type:"getRevalCharts",value:{tag:a,job:n}})}let S;function k(){let{socket:e}=new V;S=e,S.onopen=()=>{const{job:e,tag:a}=t.query,n=JSON.stringify({userId:localStorage.getItem("machineId"),job:e,tag:a});S.send(n)},S.onmessage=({data:e})=>{try{_({data:{type:"getRevalCharts",value:e,pid:void 0}})}catch(t){console.log("错误")}},S.onclose=e=>{console.log("关闭",e)},S.onerror=e=>{console.log("报错",e)}}return console.log("route.query.modelType==>",t.query.modelType),"single"===w?x():"colonyBox"===w&&k(),(0,o.bv)((()=>{(0,o.Y3)((()=>{r=qe(s.value,"dark").myChart,d=qe(i.value,"dark").myChart,window.onresize=()=>{r.resize(),d.resize()}}))})),(0,o.Ah)((()=>{window.removeEventListener("message",_),"single"===w?Bt.postMessage({type:"kill",pid:b}):"colonyBox"===w&&S.close()})),(e,t)=>{const a=(0,o.up)("dv-decoration-11"),n=(0,o.up)("dv-decoration-5"),r=(0,o.up)("dv-digital-flop"),d=(0,o.up)("dv-border-box-12"),u=(0,o.up)("a-col"),c=(0,o.up)("a-row");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",Pt,[(0,o._)("div",{class:"main-tab",onClick:t[0]||(t[0]=t=>e.$router.push("/"))},[(0,o.Wm)(a,{style:{width:"200px",height:"60px"}},{default:(0,o.w5)((()=>[Ot])),_:1})]),(0,o.Wm)(n,{style:{width:"800px",height:"80px"},class:"name"})]),(0,o._)("div",qt,[(0,o._)("div",null,[(0,o._)("div",{ref_key:"cpuRef",ref:s,class:"cpu"},null,512)]),(0,o._)("div",Wt,[(0,o.Wm)(c,{gutter:[40,40]},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,m.SU)(v),(e=>((0,o.wg)(),(0,o.j4)(u,{key:e.name,xl:12,xxl:8,xxxl:6},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{style:{width:"100%",height:"150px"},"background-color":"rgba(255,255,255,0.15)"},{default:(0,o.w5)((()=>[(0,o._)("div",Lt,[(0,o._)("img",{src:e.img,class:"card-icon"},null,8,Dt),(0,o._)("div",null,[(0,o._)("div",Ht,(0,g.zw)(e.name),1),(0,o.Wm)(r,{config:{number:[e.value],content:`{nt}${e.unit}`,textAlign:"left"},style:{width:"200px",height:"50px"}},null,8,["config"])])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])]),(0,o._)("div",{ref_key:"memoryRef",ref:i,class:"memory"},null,512),(0,o.Wm)(ye,{visible:(0,m.SU)(l)},null,8,["visible"])])}}});const Mt=(0,s.Z)(Tt,[["__scopeId","data-v-b3894956"]]);var Et=Mt;const At=[{path:"/",component:Pe},{path:"/result/report",component:Fe},{path:"/result/list",component:Xe},{path:"/task/list",component:yt},{path:"/result/hardware_table",component:jt},{path:"/reval_charts/index",name:"RevalCharts",component:Et},{path:"/result/historical_report",component:it}],Rt=(0,p.p7)({history:(0,p.PP)(),routes:At});var Zt=Rt;const $t=(0,n.ri)(d),Bt=acquireVsCodeApi();window.addEventListener("message",(e=>{"getMachineId"===e.data.type&&localStorage.setItem("machineId",e.data.value.machineId),"getBoxapi"===e.data.type&&sessionStorage.setItem("boxapi",e.data.value),"getOsType"===e.data.type&&sessionStorage.setItem("osType",e.data.value),"getSlurmapi"===e.data.type&&sessionStorage.setItem("slurmapi",e.data.value),"getSlurmApiList"===e.data.type&&sessionStorage.setItem("slurmApiList",e.data.value),"getBoxApiList"===e.data.type&&sessionStorage.setItem("boxApiList",e.data.value)})),["getMachineId","getBoxapi","getOsType","getSlurmapi"].forEach((e=>{Bt.postMessage({type:e})})),$t.use(u.ZP),$t.use(c.ZP),$t.use(Zt),$t.mount("#app")},5404:function(e,t,a){e.exports=a.p+"img/cpu.ac1c8df5.svg"},2918:function(e,t,a){e.exports=a.p+"img/hard-disk.d40c7ac3.svg"},1124:function(e,t,a){e.exports=a.p+"img/memory.07de4e5a.svg"}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,l){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],l=e[u][2];for(var i=!0,r=0;r<n.length;r++)(!1&l||s>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[r])}))?n.splice(r--,1):(i=!1,l<s&&(s=l));if(i){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,l,s=n[0],i=n[1],r=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(r)var u=r(a)}for(t&&t(n);d<s.length;d++)l=s[d],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},n=self["webpackChunkquan_graph"]=self["webpackChunkquan_graph"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(6224)}));n=a.O(n)})();
//# sourceMappingURL=app.60bfe846.js.map